<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js中的一些模块 | Merry He&#39;s Blogs</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/merryHe-blogs/images/send.png">
    <meta name="description" content="Do what you want to do when you think it&#39;s too late, maybe it&#39;s not too late">
    
    <link rel="preload" href="/merryHe-blogs/assets/css/0.styles.fc187433.css" as="style"><link rel="preload" href="/merryHe-blogs/assets/js/app.7229edb3.js" as="script"><link rel="preload" href="/merryHe-blogs/assets/js/7.72007088.js" as="script"><link rel="preload" href="/merryHe-blogs/assets/js/2.f4e51e75.js" as="script"><link rel="preload" href="/merryHe-blogs/assets/js/1.5bfc9c43.js" as="script"><link rel="preload" href="/merryHe-blogs/assets/js/43.59acd8e3.js" as="script"><link rel="prefetch" href="/merryHe-blogs/assets/js/10.0f426467.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/11.d227d7fd.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/14.d6581907.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/15.77b684a1.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/16.c22c3e85.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/17.1f47d244.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/18.4be3acdb.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/19.fcc1313b.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/20.ddc5128d.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/21.64ab5463.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/22.4684224c.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/23.e19b4d7f.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/24.37a08831.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/25.5d94cb42.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/26.188f30f9.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/27.30d6c0a1.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/28.7b1296d4.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/29.31ec38df.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/3.29a7afb5.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/30.bd79c677.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/31.287faabc.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/32.66ec6772.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/33.b6543f71.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/34.cd97e668.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/35.9e5c847f.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/36.7cb4337e.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/37.56a19966.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/38.5a794679.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/39.047a4059.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/4.f3495690.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/40.85da66b5.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/41.7ff1cafd.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/42.9d93c1d7.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/44.26690a74.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/45.2d1d6e50.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/46.52d9bd1a.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/47.4d5e0ded.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/48.7ac7558c.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/49.4baf97ca.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/5.130c8123.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/50.2f8c1405.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/51.40a6cee9.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/52.2fad2e1a.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/53.8b354c4e.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/54.a673c218.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/6.7c5f0b85.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/8.6c9da593.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/9.770f8382.js"><link rel="prefetch" href="/merryHe-blogs/assets/js/vendors~docsearch.d88e1573.js">
    <link rel="stylesheet" href="/merryHe-blogs/assets/css/0.styles.fc187433.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-59db31b3><div data-v-59db31b3><div class="password-shadow password-wrapper-out" style="display:none;" data-v-6b182a98 data-v-59db31b3 data-v-59db31b3><h3 class="title" data-v-6b182a98>Merry He's Blogs</h3> <p class="description" data-v-6b182a98>Do what you want to do when you think it's too late, maybe it's not too late</p> <label id="box" class="inputBox" data-v-6b182a98><input type="password" value="" data-v-6b182a98> <span data-v-6b182a98>Konck! Knock!</span> <button data-v-6b182a98>OK</button></label> <div class="footer" data-v-6b182a98><span data-v-6b182a98><i class="iconfont reco-theme" data-v-6b182a98></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6b182a98>vuePress-theme-reco</a></span> <span data-v-6b182a98><i class="iconfont reco-copyright" data-v-6b182a98></i> <a data-v-6b182a98><span data-v-6b182a98>Merry He</span>
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-59db31b3><header class="navbar" data-v-59db31b3><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/merryHe-blogs/" class="home-link router-link-active"><img src="/merryHe-blogs/images/shark.png" alt="Merry He's Blogs" class="logo"> <span class="site-name">Merry He's Blogs</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/merryHe-blogs/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/读书笔记/" class="nav-link"><i class="undefined"></i>
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/问题记录/" class="nav-link"><i class="undefined"></i>
  问题记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Other Articles
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/User_Name9999?type=blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/hfDeveloper?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-signature-write" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-npm"></i>
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://meiriyiwen.com/random" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  每日一文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-59db31b3></div> <aside class="sidebar" data-v-59db31b3><div class="personal-info-wrapper" data-v-1ba30565 data-v-59db31b3><img src="/merryHe-blogs/images/shark.png" alt="author-avatar" class="personal-img" data-v-1ba30565> <h3 class="name" data-v-1ba30565>
    Merry He
  </h3> <div class="num" data-v-1ba30565><div data-v-1ba30565><h3 data-v-1ba30565>16</h3> <h6 data-v-1ba30565>Articles</h6></div> <div data-v-1ba30565><h3 data-v-1ba30565>0</h3> <h6 data-v-1ba30565>Tags</h6></div></div> <ul class="social-links" data-v-1ba30565></ul> <hr data-v-1ba30565></div> <nav class="nav-links"><div class="nav-item"><a href="/merryHe-blogs/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/读书笔记/" class="nav-link"><i class="undefined"></i>
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/merryHe-blogs/categories/问题记录/" class="nav-link"><i class="undefined"></i>
  问题记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Other Articles
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/User_Name9999?type=blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/hfDeveloper?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-signature-write" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-npm"></i>
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://meiriyiwen.com/random" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  每日一文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6b182a98 data-v-59db31b3><h3 class="title" data-v-6b182a98>Node.js中的一些模块</h3> <!----> <label id="box" class="inputBox" data-v-6b182a98><input type="password" value="" data-v-6b182a98> <span data-v-6b182a98>Konck! Knock!</span> <button data-v-6b182a98>OK</button></label> <div class="footer" data-v-6b182a98><span data-v-6b182a98><i class="iconfont reco-theme" data-v-6b182a98></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6b182a98>vuePress-theme-reco</a></span> <span data-v-6b182a98><i class="iconfont reco-copyright" data-v-6b182a98></i> <a data-v-6b182a98><span data-v-6b182a98>Merry He</span>
          
        <!---->
        2024
      </a></span></div></div> <div data-v-59db31b3><div data-v-59db31b3><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">Node.js中的一些模块</h1> <div data-v-6b133a58><i class="iconfont reco-account" data-v-6b133a58><span data-v-6b133a58>Merry He</span></i> <i class="iconfont reco-date" data-v-6b133a58><span data-v-6b133a58>4/26/2023</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="什么是node-js"><a href="#什么是node-js" class="header-anchor">#</a> 什么是Node.js ?</h2> <p>Node.js 不是一门新的编程语言， 也不是一个用于实现具体功能的第三方工具库， 而是一个基于Chrome V8引擎的 <b><font color="FireBrick"> JavaScript 运行环境</font></b> ，
用来支持 JavaScript 代码的执行。用编程术语来讲，Node.js 是一个 JavaScript 运行时（Runtime）。它让 JavaScript 脱离了浏览器环境，可以直接在计算机上运行，极大地拓展了 JavaScript 用途。</p> <p><font color="#008B8B"> 记录 Node.js 中的一些内置模块...</font></p> <h2 id="一、buffer模块"><a href="#一、buffer模块" class="header-anchor">#</a> 一、Buffer模块</h2> <p>Buffer ( 缓冲区 )是一个类似于数组的对象 ，用于表示固定长度的字节序列 ；Buffer本质是一段内存空间， 专门<b><font color="FireBrick"> 用来存放二进制数据</font></b><br> <b>Buffer实例的创建和字符串转换:</b></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//Node.js 中创建 Buffer 的方式主要如下三种：</span>
<span class="token comment">// Buffer.alloc()</span>
<span class="token keyword">let</span> buff <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">//创建一个大小为 5 个字节的缓冲区,相当于申请了 5 字节的内存空间，每个字节的值为 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 00 00 00 00 00&gt;</span>

<span class="token comment">// Buffer.allocUnsafe()</span>
<span class="token keyword">let</span> buff2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buff2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//&lt;Buffer 00 00 00 00 00&gt;</span>

<span class="token comment">// Buffer.from() 可以将一个字符串或数组转为Buffer</span>
<span class="token keyword">let</span> buffer3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> buffer4 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 68 65 6c 6c 6f 20 77 6f 72 6c 64&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 69 6c 6f 76 65 79 6f 75&gt;</span>

<span class="token comment">// Buffer与字符串转换</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> buffer3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello world</span>

<span class="token comment">//可以直接通过 [] 下标的方式对Buffer的读取和修改 </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//104</span>
buffer3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//dello world</span>
</code></pre></div><br> <br> <h2 id="二、fs-文件系统模块"><a href="#二、fs-文件系统模块" class="header-anchor">#</a> 二、fs 文件系统模块</h2> <p><b><font color="FireBrick"> fs</font></b>   全称为 file system ，称之为 文件系统 ，是 Node.js 中的 内置模块。fs模块可以实现与硬盘的交互，例如文件的创建、删除、重命名、移动，以及文件内容的写入和读取，以及文件夹相关的操作。</p> <h3 id="_2-1-文件写入"><a href="#_2-1-文件写入" class="header-anchor">#</a> <b>2.1 文件写入</b></h3> <p><font color="FireBrick"> 使用场景 </font>：下载文件、安装软件、保存程序日志(如 Git)、编辑器保存文件、视频录制等需要持久化保存数据的时候，应该想到文件写入</p> <ol><li>writeFile  异步写入</li> <li>writeFileSync  同步写入</li> <li>appendFile / appendFileSync  追加写入</li> <li>createWriteStream  流式写入</li></ol> <h4 id="_2-1-1-异步写入"><a href="#_2-1-1-异步写入" class="header-anchor">#</a> <b>2.1.1 异步写入</b></h4> <p>语法： fs.writeFile( file，data，[，options  ]，callback )</p> <ul><li>file 写入的路径 ( 文件不存在会自动创建 )</li> <li>data  要写入的数据</li> <li>options 选项设置（可选）</li> <li>callback  回调函数</li></ul> <p>例如需求 ： 在当前 js 文件的同级目录新建一个 &quot; 滕王阁序.txt &quot;文件, 并在txt文件中写入内容 &quot; 时维九月 &quot;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.想要使用 fs 模块需要先使用全局方法require( )导入 fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2 异步的去做磁盘的文件写入，即 fs.writeFile( )是异步的</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./滕王阁序.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;时维九月&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//写入成功时 形参err为null; 写入失败时 err为错误信息对象</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
<span class="token comment">//先打印111，再打印异步的回调函数里的  &quot;写入成功&quot;或&quot; 写入失败&quot;</span>
</code></pre></div><h4 id="_2-1-2-同步写入"><a href="#_2-1-2-同步写入" class="header-anchor">#</a> <b>2.1.2 同步写入</b></h4> <p>语法： fs.writeFileSync( file， data ，[，options  ] )，无回调函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">//同步的去做磁盘的文件写入，即 fs.writeFileSync( )是同步的</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./滕王阁序.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;,序属三秋&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-1-3-追加写入-异步"><a href="#_2-1-3-追加写入-异步" class="header-anchor">#</a> <b>2.1.3 追加写入(异步) </b></h4> <p>追加写入就是将写入内容追加至文件的末尾，语法与异步写入fs.writeFile( )相同</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">&quot;./滕王阁序.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;,潦水尽而寒潭清&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;追加内容失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;追加内容成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//注： 使用异步写入 fs.writeFile( ) 的配置项 { flag:&quot;a&quot; }也可以实现 追加写入的效果  ( 若无此配置项会清空文件内容后再写入内容 )</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./滕王阁序.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;,俨骖騑于上路&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">&quot;a&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;追加内容失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;追加内容成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-1-4-同步追加写入"><a href="#_2-1-4-同步追加写入" class="header-anchor">#</a> <b>2.1.4  同步追加写入</b></h4> <p>语法：与同步写入fs.writeFileSync( )相同</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./滕王阁序.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\r\n烟光凝而暮山紫&quot;</span><span class="token punctuation">)</span> <span class="token comment">// fs模块中 \r\n表示换行</span>
</code></pre></div><h4 id="_2-1-5-流式写入"><a href="#_2-1-5-流式写入" class="header-anchor">#</a> <b>2.1.5 流式写入</b></h4> <p>程序打开一个文件是需要消耗资源的，流式写入可以减少文件的打开和关闭次数，因此流式写入适合大文件写入和频繁写入的场景；而writeFile( )适合的是写入频率较低的场景</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建写入流对象</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;./早春呈水部张十八员外·txt&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//调用写入流对象的write()方法写入内容</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;天街小雨润如酥\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;草色遥看近却无\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;最是一年春好处\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;绝胜烟柳满皇都\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//关闭流通道(可选)</span>
ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><br> <h3 id="_2-2-文件读取"><a href="#_2-2-文件读取" class="header-anchor">#</a> <b>2.2 文件读取</b></h3> <p>就是通过程序从文件中取出其中的数据， 场景：电脑开机、程序运行  、编辑器打开文件、   查看图片   、播放视频  、播放音乐 、 Git 查看日志( git log )  、上传文件  、查看聊天记录 。</p> <ol><li>readFile  异步读取</li> <li>readFileSync  同步读取</li> <li>createReadStream  流式读取</li></ol> <h4 id="_2-2-1-异步读取"><a href="#_2-2-1-异步读取" class="header-anchor">#</a> <b>2.2.1 异步读取</b></h4> <p>语法: fs.readFile( path [, options],  callback )</p> <ul><li>path 文件路径</li> <li>options 选项配置</li> <li>callback 回调函数( null或错误信息，读取到的数据 )</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//异步的读取文件</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./早春呈水部张十八员外·txt&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印的是二进制Buffer</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把Buffer转字符串，可以得到正确的诗词</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-2-2-同步读取"><a href="#_2-2-2-同步读取" class="header-anchor">#</a> <b>2.2.2 同步读取</b></h4> <p>语法：fs.readFileSync( '文件路径' )</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> fileBuffer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./早春呈水部张十八员外·txt&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-2-3-流式读取"><a href="#_2-2-3-流式读取" class="header-anchor">#</a> <b>2.2.3 流式读取</b></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建流式读取对象</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer.mp4&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//读取： chunk是大小为64kB的每一个块，读取视频的一个块执行一次回调函数</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span><span class="token parameter">chunk</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// console.log(chunk); //每一个块的Buffer</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">//65536byte ===&gt;64kB</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//读取结束</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取视频完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-3-文件复制"><a href="#_2-3-文件复制" class="header-anchor">#</a> <b>2.3 文件复制</b></h3> <p>在 Node.js 中可以使用 <font color="FireBrick">fs.copyFile( ) </font>  实现文件的复制功能，也可以既复制文件又更改文件名字</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> clonePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../test/server.js&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> newPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./video/newServer.js&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span>clonePath<span class="token punctuation">,</span>newPath<span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;server.js文件复制并更改名字成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>文件先读再写就可以完成一个复制功能</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//方式一：使用常规的文件读取后再写入另一个文件</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//读取</span>
<span class="token keyword">const</span> readFiles <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer.mp4&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//写入</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer-2.mp4&quot;</span><span class="token punctuation">,</span>readFiles<span class="token punctuation">)</span>

<span class="token comment">//方式二 ： 使用流式读取和写入 (性能更好)</span>
<span class="token comment">//创建读取流对象</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer.mp4&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建写入流对象</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer-3.mp4&quot;</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span><span class="token parameter">chunk</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//边读边写，将每一个分片写入文件</span>
    ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//读取完成时触发</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件复制成功，一份新的dancer视频文件复制到video文件夹下&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//方式三 ： pipe （）</span>
<span class="token comment">//在方式二中不必再去绑定读取流的data事件，直接调用 pipe方法也可以实现复制</span>
rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-4-文件重命名与移动"><a href="#_2-4-文件重命名与移动" class="header-anchor">#</a> <b>2.4 文件重命名与移动</b></h3> <p>在 Node.js 中，可以使用 <font color="FireBrick">  rename  </font>  或  <font color="FireBrick">  renameSync  </font> 来移动或重命名文件或文件夹<br>
语法：</p> <ol><li>fs.rename( oldPath,  newPath,  callback )</li> <li>fs.renameSync( oldPath,  newPath )</li></ol> <p>参数说明：</p> <ul><li>oldPath 文件当前的路径</li> <li>newPath 文件新的路径</li> <li>callback 操作后的回调</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//重命名  路径不变，改文件名即可</span>
fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;./早春呈水部张十八员外·txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./诗词.txt&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;重命名成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;重命名失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//移动,文件的名称不变，修改前面的路径(移动时，移动到不存在的文件夹会移动失败,例：poem)</span>
fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;./诗词.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./poem/诗词.txt&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;移动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;移动失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-5-文件删除"><a href="#_2-5-文件删除" class="header-anchor">#</a> <b>2.5 文件删除</b></h3> <p>在 Node.js 中，我们可以使用 <font color="FireBrick">  unlink </font>  或<font color="FireBrick">  unlinkSync </font> 或 <font color="FireBrick">rm </font> 来删除文件<br>
语法：</p> <ol><li>fs.unlink( path,  callback )</li> <li>fs.unlinkSync( path )<br>
rm( ) 同上</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&quot;./诗词.txt&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//第二种方式 </span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&quot;./诗词1.txt&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-6-文件夹的创建-读取-删除"><a href="#_2-6-文件夹的创建-读取-删除" class="header-anchor">#</a> <b>2.6 文件夹的创建/读取/删除</b></h3> <p>借助 Node.js 的能力，我们可以对文件夹进行 创建 、读取 、删除 等操作</p> <ol><li>mkdir / mkdirSync  创建文件夹</li> <li>readdir / readdirSync  读取文件夹</li> <li>rmdir / rmdirSync  删除文件夹</li></ol> <p>语法：</p> <ul><li>fs.mkdir( path [, options], callback )</li> <li>fs.mkdirSync( path [, options] )</li></ul> <h4 id="_2-6-1-创建文件夹"><a href="#_2-6-1-创建文件夹" class="header-anchor">#</a> <b>2.6.1 创建文件夹</b></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建单个文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&quot;./utils&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//创建多层级文件夹,需要添加配置项</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&quot;./audio/myAudio&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-6-2-读取文件夹下的资源"><a href="#_2-6-2-读取文件夹下的资源" class="header-anchor">#</a> <b>2.6.2 读取文件夹下的资源</b></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//例： 读取当前js文件的父级文件夹下有哪些资源</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 数组  [ '1.js',  'audio', 'utils', 'video' ]</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件夹失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="_2-6-3-删除文件夹"><a href="#_2-6-3-删除文件夹" class="header-anchor">#</a> <b>2.6.3 删除文件夹</b></h4> <p>在 Node.js 中，我们可以使用 <font color="FireBrick"> rmdir</font>  或 <font color="FireBrick"> rm</font> 来删除文件， 推荐使用 rm 方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//删除单层级文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./utils&quot;</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//提示</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

 <span class="token comment">//删除多层级文件夹,需要添加 recursive配置项</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./audio&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//提示</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//删除文件夹建议使用rm()</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&quot;./audio&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//提示</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-7-查看文件-文件夹的状态"><a href="#_2-7-查看文件-文件夹的状态" class="header-anchor">#</a> <b>2.7 查看文件/文件夹的状态</b></h3> <p>在 Node.js 中，我们可以使用 <font color="FireBrick">stat</font>  或 <font color="FireBrick">statSync</font> 来查看资源的详细信息<br>
语法：</p> <ol><li>fs.stat( path [, options],  callback )</li> <li>fs.statSync( path [, options] )
参数说明：</li></ol> <ul><li>path 文件夹路径</li> <li>options 选项配置（ 可选 ）</li> <li>callback 操作后的回调</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">&quot;./video/dancer.mp4&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//资源的信息(资源的创建时间、修改时间、文件大小等)</span>
        <span class="token comment">//资源是不是文件</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true </span>
        <span class="token comment">//资源是不是文件夹</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;查看资源状态失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><br> <br> <h2 id="三、path模块"><a href="#三、path模块" class="header-anchor">#</a> 三、Path模块</h2> <p>Node.js 中的模块提供了用于处理文件和目录的路径的实用工具。  先了解相对路径和绝对路径， 再去介绍 Path 模块提供的一些 API</p> <h3 id="相对路径"><a href="#相对路径" class="header-anchor">#</a> <b>相对路径</b></h3> <p>相对路径是指以当前文件资源所在的目录为参照基础，链接到目标文件资源(或文件夹)的路径。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//相对路径</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./index.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;index.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">//两种相对路径写法一样，都会在当前js文件同级目录新建index.txt文件</span>
</code></pre></div><h3 id="绝对路径"><a href="#绝对路径" class="header-anchor">#</a> <b>绝对路径</b></h3> <p>绝对路径就是文件的真正存在的路径，是指从硬盘的根目录(盘符)开始，进行一级级目录指向文件 ；<br> <font color="FireBrick"> __filename</font> : 可以大致理解为一个全局变量，表示当前js程序文件的绝对路径 ；<br> <font color="FireBrick"> __dirname</font> ：可以大致理解为一个全局变量，表示当前js文件所在的文件目录的绝对路径（即,当前js文件的父级）；</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//绝对路径(例：在D盘根目录新建一个index.txt)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;D:index.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;C:index.txt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">//报错，权限不够</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span> <span class="token comment">//在当前js程序文件的同级目录新建了index.txt</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\index.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test</span>
<span class="token comment">/* node.js 中的相对路径是按照终端所在的文件位置决定的，而不是当前js程序所在的位置决定的，这就导致在不同的
位置执行同一个js文件时，里面的相对路径都不相同（可以使用绝对路径__dirname解决这个问题） */</span>
</code></pre></div><h3 id="path模块的一些api"><a href="#path模块的一些api" class="header-anchor">#</a> <b>path模块的一些API</b></h3> <ul><li><font color="FireBrick">  path.resolve </font> 把全部给定的 path 片段按规则拼接到一起， 并规范化生成的<b><font color="FireBrick">绝对路径</font></b>( 常用 )</li> <li><font color="FireBrick">  path.join </font>     把全部给定的 path 片段按规则拼接到一起，并规范化生成的<b><font color="FireBrick">相对路径</font></b></li> <li>path.sep    获取操作系统的路径分隔符</li> <li>path.parse    解析路径并返回对象</li> <li>path.basename    获取路径的基础名称</li> <li>path.dirname    获取路径的目录名</li> <li>path.extname    获得路径的扩展名</li></ul> <h4 id="_1-path-resolve"><a href="#_1-path-resolve" class="header-anchor">#</a> <b>1.  path.resolve ( )</b></h4> <p>path.resolve( ) 用于拼接规范的路径,会把一个路径或路径片段的序列解析为一个<b><font color="FireBrick">绝对路径</font></b> ；<br> <font color="FireBrick">拼接规则：</font> 想要理解path.resolve( )对路径片段的拼接规则，我们从三种情况中去入手 ；<br>
情况一： path.resolve( )接收的所有路径片段中不带 <b><font color="FireBrick">/</font></b> 或者为 <b><font color="FireBrick">./</font></b>    ===&gt;  此时所有参数都会被拼接到当前目录的后面</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// E:\study\node\test\index.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//E:\study\node\test 注：当前js程序文件所在的工作目录（js文件的父级）</span>
<span class="token comment">//  注：  不带 /的情况</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\a  不加__dirname,自动找到了__dirname再去拼接a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\a\b</span>
<span class="token comment">//  注：  ./的情况</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./b&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  E:\study\node\test\a\b</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  E:\study\node\test\a\b\c</span>
</code></pre></div><p>情况二： path.resolve( )接收的所有路径片段带 <b><font color="FireBrick">../</font></b>     ===&gt;  拼接的过程中碰到 ../会跳出当前文件夹( 往前跳一级 )，然后再拼接上 ../后的片段</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//E:\study\node\test 注：当前js程序文件所在的工作目录（js文件的父级）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node      往前跳了一级，跳出了test文件夹</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../a&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//E:\study\node\a    往前跳了一级，再去拼接a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;../b&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//E:\study\node\b    跳出a文件夹再去拼接b</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'static_files/png/'</span><span class="token punctuation">,</span> <span class="token string">'../gif/image.gif'</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//E:\study\node\test\static_files\gif\image.gif  跳出png文件夹再去拼接gif/image.gif</span>
</code></pre></div><p>情况三： path.resolve( )接收的所有路径片段带  <b><font color="FireBrick">/</font></b>      ===&gt;   以最后一个出现的带 / 参数为起始位置，不接受当前路径前的任何参数，包括文件所在路径( 即，最后一个 带 / 的路径片段为起始位置，且从当前文件所在的磁盘开始拼接 )</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test 注：当前js程序文件所在的工作目录（js文件的父级）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\a   定向到E盘，再拼接a  (最后一个带/的片段会定向到js文件所在的磁盘根目录，再去拼接)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\b   定向到E盘，再拼接b</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/c&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\c   定向到E盘，再拼接c (最后一个带/的路径片段作为起始位置，且它前面的所有路径片段都不可用)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;/a/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./c&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\a\b\c   定向到E盘，再拼接起始位置/a/b ，再拼接/c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>  path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b/c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;../d&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\b\d   定向到E盘，再拼接起始位置/b/c ，然后跳出c再拼接d  </span>
</code></pre></div><p><font color="#008B8B">读到这，我相信你是懂path.resolve( ) 的拼接规则的</font></p> <h4 id="_2-path-join"><a href="#_2-path-join" class="header-anchor">#</a> <b>2.  path.join ( )</b></h4> <p>path.join( ) 会把全部给定的 path 片段连接到一起，并规范化生成的<b><font color="FireBrick">相对路径</font></b> ( 不会定向到磁盘根目录 )<br> <font color="FireBrick">拼接规则：</font></p> <ul><li>    带<b><font color="FireBrick">/</font></b> 和 <b><font color="FireBrick">./</font></b> 的非空片段都会依次拼接 ( 但是 / 在开头和末尾都会保留， ./ 仅在末尾会保留。 path.resolve()则不会保留开头和末尾的斜杠 )</li> <li><b><font color="FireBrick">../</font></b> 也会跳出文件夹，返回上一级 ( 但是会保留末尾的/， 这是与 resolve 不同的地方 )</li> <li><b><font color="FireBrick">..</font></b> 跳出文件夹，返回上一级</li> <li><b><font color="FireBrick">&quot;&quot;</font></b>  空片段为空会跳过此片段</li></ul> <p>看几个例子就明白了...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  b </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  /b  保留开头\</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  b  ./不会保留开头的\</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a\b  依次拼接</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  \a\b\  依次拼接并保留末尾的\</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  \a\b\  依次拼接并保留末尾的\</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \a\b 依次拼接( 第二片段已经到了a目录下，./返回a目录，再去拼接./b  )</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a\b\  依次拼接,不保留前面的./ , 保留后面的 /</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a\b\  依次拼接,不保留前面的两个./ , 保留后面的 /</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;../c&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  \a\c  ../跳出了b目录，进入a目录再去拼接c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;..&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a     ..跳出了b目录，进入a目录</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;../&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a\  ..跳出了b目录，进入a目录,并保留了末尾的/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  a\c</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;../d/&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\a\b\d\ </span>
</code></pre></div><p><font color="#008B8B">读到这，我相信你是懂path.join( ) 的拼接规则的</font></p> <h4 id="_3-path-extname"><a href="#_3-path-extname" class="header-anchor">#</a> <b>3.  path.extname ( )</b></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// E:\study\node\test\index.js</span>
<span class="token keyword">const</span> fileExt <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span> __filename <span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileExt<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  .js</span>
</code></pre></div><br> <br> <h2 id="四、http模块"><a href="#四、http模块" class="header-anchor">#</a> 四、http模块</h2> <p>谈 Node.js 的 http 模块之前，先大致了解一下什么是 HTTP。HTTP(Hypertext transfer protocol)超文本传输协议，是互联网的一种通信协议，用于客户端与服务器之间的通信，它规定了客户端和服务器之间的通信格式，包括请求与响应的格式。它允许将超文本标记语言(HTML)文档从Web服务器传送到客户端的浏览器。</p> <p>Node.js 中的 http 模块是 Node.js 官方提供的、用来创建 web 服务器的模块，通过 http 模块提供的 <font color="FireBrick">http.createServer( )</font> 方法，就能方便的把一台普通的电脑，变成一台 Web 服务器，从而对外提供 Web 资源服务</p> <h3 id="_4-1-创建http服务"><a href="#_4-1-创建http服务" class="header-anchor">#</a> <b>4.1 创建HTTP服务</b></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//引入http模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 此回调函数会在浏览器客户端发起请求的时候调用，可以获取到请求相关的信息和设置要响应的内容</span>
    <span class="token comment">// res.end(&quot;hello world&quot;) //设置响应体</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//响应体中文乱码，可以通过上面设置响应头添加;charset=utf-8 utf-8编码解决</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//注：HTTP协议的默认端口号是80，HTTPS协议的默认端口号是443</span>
<span class="token comment">//浏览器访问 127.0.0.1:3000 即可； 如果使用了默认的80端口，访问127.0.0.1即可</span>
</code></pre></div><h3 id="_4-2-获取请求头和请求参数相关信息"><a href="#_4-2-获取请求头和请求参数相关信息" class="header-anchor">#</a> <b>4.2 获取请求头和请求参数相关信息</b></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 假设完整 url ===&gt; http://127.0.0.1:3000/list-search?pages=1&amp;rows=20</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//引入 url 模块</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//一、获取请求行和请求头相关信息</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> req<span class="token punctuation">.</span>httpVersion <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取http协议版本 ===&gt; 1.1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> req<span class="token punctuation">.</span>url <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取url中的接口路径和查询字符串部分 ===&gt;  /list-search?pages=1&amp;rows=20</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> req<span class="token punctuation">.</span>method <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// GET</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> req<span class="token punctuation">.</span>headers <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取请求头的信息 ===&gt; 请求头信息对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>host <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 请求的服务器主机地址和端口 ===&gt; 127.0.0.1:3000</span>

    <span class="token comment">//二、获取请求路径和请求参数相关信息 ( 借助Node.js 的 url 模块来序列化路径 )</span>
    <span class="token keyword">let</span> pathRes <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>   
    <span class="token comment">//获取路径</span>
    <span class="token keyword">let</span> requestPath <span class="token operator">=</span> pathRes<span class="token punctuation">.</span>pathname
    <span class="token comment">//获取参数对象</span>
    <span class="token keyword">let</span> requestQueryObj <span class="token operator">=</span> pathRes<span class="token punctuation">.</span>query 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> requestPath <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  /list-search</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> requestQueryObj <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { pages: '1', rows: '20' }</span>

    <span class="token comment">//三、使用Node.js的URL类也可以获取请求的路径和请求参数等相关信息</span>
    <span class="token keyword">const</span> myUlr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span><span class="token string">&quot;http:127.0.0.1&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 参数二 : 协议和域名/IP地址 </span>
    <span class="token comment">//获取路径</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> myUlr<span class="token punctuation">.</span>pathname <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//     /list-search</span>
    <span class="token comment">//获取请求参数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> myUlr<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;pages&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  1</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-3-设置响应体相关信息"><a href="#_4-3-设置响应体相关信息" class="header-anchor">#</a> <b>4.3 设置响应体相关信息</b></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//设置响应状态码</span>
    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token comment">//设置响应状态描述 </span>
    res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">&quot;okok&quot;</span>
    <span class="token comment">//设置响应头( key,value )</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//设置同名响应头</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;myCustomServer&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;NodeJs&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//设置了三个同名的 myCustomServer 请求头 ，值分别为 NodeJs 、JavaScript、abc</span>
    <span class="token comment">//设置响应体 ( write设置了响应体一般就不在end里再写了 ),服务端设置的响应体内容可以在浏览器Network的Response和Preview中查看</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;返回一个 hello world给浏览器客户端&quot;</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><b>响应练习 ： </b>尝试给浏览器客户端响应一段 html 字符串(浏览器客户端会自动解析响应体中的 html 字符串，展示到页面上)
例：响应一段 html 字符串让浏览器解析为一个两行三列的 table 表格，第一行和第二行颜色不同，并且点击单元格可以 toggle 来回切换一个黑色背景色</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;!DOCTYPE html&gt;
        &lt;html lang=&quot;en&quot;&gt;
        &lt;head&gt;
            &lt;meta charset=&quot;UTF-8&quot;&gt;
            &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
            &lt;title&gt;Document&lt;/title&gt;
            &lt;!-- 样式 --&gt;
            &lt;style&gt;
                td{
                    padding:15px 35px;
                }
                table,td{
                    border-collapse:collapse;
                }
                table tr:nth-child(odd){
                    background-color:#40E0D0;
                }
                table tr:nth-child(even){
                    background-color:pink;
                }
                .toggleBlock{
                    background-color:#000;
                }
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;!-- 结构 --&gt;
        &lt;body&gt;
            &lt;table border=&quot;1&quot;&gt;
                &lt;tr&gt;&lt;td /&gt;&lt;td /&gt;&lt;td /&gt;&lt;/tr&gt;
                &lt;tr&gt;&lt;td /&gt;&lt;td /&gt;&lt;td /&gt;&lt;/tr&gt;
                &lt;tr&gt;&lt;td /&gt;&lt;td /&gt;&lt;td /&gt;&lt;/tr&gt;
            &lt;/table&gt;
        &lt;/body&gt;
        &lt;script&gt;
            //脚本
            let allTd = document.querySelectorAll(&quot;td&quot;)
            allTd.forEach(item=&gt;{
                item.onclick = ()=&gt;{
                    item.classList.toggle(&quot;toggleBlock&quot;)
                }
            })
        &lt;/script&gt;
        &lt;/html&gt; 
   </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//浏览器地址栏访问127.0.0.1:3000就可以看到这个两行三列的table表格了</span>
</code></pre></div><p>上面有一个明显的问题就是， html、css、js都是在无代码提示的情况下纯手写的， 显然很不方便， 这个时候我们可以借助 fs 文件系统模块对它做一些调整</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//现在一个.html文件里写好上面res.send中响应的内容，假设叫 table.html</span>
    <span class="token comment">//解析文件路径</span>
    <span class="token keyword">const</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;./table.html&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//读取html文件内容</span>
    <span class="token keyword">const</span> responseHtmlBuffer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span>
    <span class="token comment">//设置响应体( 读取的Buffer也可以不转字符串，res.send( )接受Buffer类型和字符串类型的参数</span>
     <span class="token punctuation">)</span>
   res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>responseHtmlBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//浏览器地址栏访问127.0.0.1:3000就可以看到这个两行三列的table表格了</span>
</code></pre></div><h3 id="_4-4-搭建一个静态资源服务"><a href="#_4-4-搭建一个静态资源服务" class="header-anchor">#</a> <b>4.4 搭建一个静态资源服务</b></h3> <ul><li>假设 index.html 文件里的 css、js 或者图片都是通过src或者href属性在外部链入的，这个时候浏览器解析 index.html 时， 遇到这些外部链入的资源会去发送一个新的请求去
获取这些外链资源 ， 这个时候服务的回调函数会再次调用， 就需要返回相应的 css 或 js 或图片等资源 ， 而不是都返回 html ；我们可以通过请求路径去返回相应资源；</li> <li>假设文件资源目录如下：与当前 server.js 程序同级的 pageResource 文件夹( 静态资源目录/网站根目录 )下，有 css、js、images文件夹和 index.html 文件；文件夹内存放了相应的资源，
index.html 链入了这些文件文件夹内的资源</li></ul> <p><b>目录结构</b></p> <div class="language- extra-class"><pre class="language-text"><code>project 
│
└───pageResource
│   │____css  
│   │    index.css
│   │    ....css
│   |   
|   |____js
|   |    index.js
│   │    ....js 
|   |
|   |____images
|   |    1.png
│   |    ....jpg  
|   |
|   |____index.html
| 
|______server.js //服务   
</code></pre></div><p><b>index.html</b></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 采用绝对路径的形式链入，请求资源时服务的回调函数中可以获取到此路径，再去拼接资源根目录 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/index.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>返回HTML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/images/1.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 相对路径也可以，但没有绝对路径可靠 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./js/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><b>服务server.js</b></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//server.js</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//获取用户请求的路径</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>pathname<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span><span class="token string">&quot;http:127.0.0.1&quot;</span><span class="token punctuation">)</span> <span class="token comment">//解构赋值</span>
    <span class="token comment">// console.log( pathname); //如 /index.html  或 /css/index.css</span>
    <span class="token comment">//获取绝对资源路径</span>
    <span class="token keyword">const</span> filepath <span class="token operator">=</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/pageResource&quot;</span> <span class="token operator">+</span> pathname <span class="token comment">// E:\study\node\test/pageResource/css/index.css</span>
    <span class="token comment">//读取文件内容</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">500</span>
            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//响应资源</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>浏览器访问资源 <font color="FireBrick">127.0.0.1:3000/index.html</font>， 发起网络请求， server.js 中的回调函数执行， 根据请求路径 <font color="FireBrick">/index.html</font>  拼接的资源路径找到了相应的资源，并响应给浏览器，  Network 中查看浏览器发送的几个请求中都正确返回了相应的html、css、js、图片，而不是都返回 html ;</li> <li>单独访问127.0.0.1：3000/css/index.css 也可以正确返回相应的css资源</li></ul> <p><b>访问127.0.0.1:3000/index.html</b></p> <img src="/merryHe-blogs/assets/img/network.19299dac.png"> <br> <br> <h3 id="_4-5-网页url中的绝对路径与相对路径"><a href="#_4-5-网页url中的绝对路径与相对路径" class="header-anchor">#</a> <b>4.5 网页URL中的绝对路径与相对路径</b></h3> <p><b>绝对路径</b></p> <ul><li><b>https://www.baidu.com</b>      完整地址形式， 直接指向了目标地址， 常用于网站外链</li> <li><b>//www.baidu.com/img/1.png</b>     省略协议的形式， 会去自动拼接当前网页的协议形成完整路径，再去请求资源</li> <li><b>/static/img/1.png</b>     会去自动拼接当前网页的协议、域名、端口形成完整路径再去请求资源 例：<code>&lt;img src=&quot;/static/img/1.png&quot; /&gt;</code></li></ul> <p><b>相对路径</b><br>
相对路径在发送请求时，会与当前路径进行一定规则的重新拼接， 再去发送请求， 例：当前网页地址为 https://www.baidu.com/pages/index.html</p> <ul><li><b>./static/img/1.png</b>    ===&gt;  https://www.baidu.com/pages/static/img/1.png  , ./ 会寻找到当前 index.html 的工作目录( 即， index.html 的父级文件夹 )， 再去拼接 /static/img/1.png</li> <li><b>./static/img/1.png</b>   ====&gt; 同上</li> <li><b>../static/img/1.png</b>   ====&gt;  https://www.baidu.com/static/img/1.png ， ../ 跳出了工作目录进入了根目录， 再去拼接 /static/img/1.png</li></ul> <h3 id="_4-6-响应错误信息给浏览器客户端"><a href="#_4-6-响应错误信息给浏览器客户端" class="header-anchor">#</a> <b>4.6 响应错误信息给浏览器客户端</b></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//假设需要GET请求</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">!==</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">405</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt; 405 Request Method Not Allowed &lt;h1&gt;'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>pathname<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span><span class="token string">&quot;http:127.0.0.1&quot;</span><span class="token punctuation">)</span> <span class="token comment">//解构赋值</span>
    <span class="token comment">//获取绝对资源路径</span>
    <span class="token keyword">const</span> filepath <span class="token operator">=</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/pageResource&quot;</span> <span class="token operator">+</span> pathname
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//判断错误码</span>
            <span class="token keyword">switch</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">&quot;EPERM&quot;</span><span class="token operator">:</span>
                    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">403</span>
                    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt; 403 Forbidden &lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
                      <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">&quot;ENOENT&quot;</span><span class="token operator">:</span>
                    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span>
                    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt; 404 Not Found &lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">500</span>
                    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt; 500 Interval Server Error &lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//正常</span>
        res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//监听一个端口，启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><br> <h2 id="五、模块化"><a href="#五、模块化" class="header-anchor">#</a> 五、模块化</h2> <p>在 Node.js 中， 应用由模块组成。 模块可以使用require 函数来引入其他模块，使用 <b><font color="FireBrick">module.exports</font></b> 来导出模块中的数据或函数。模块化开发可以提高程序的可维护性、可扩展性和代码的复用性( 模块化开发使得程序中的代码可以被多次使用，不同的模块之间可以互相引用和调用，从而减少代码的重复编写 )。  毫无疑问， 在多人协作开发项目时， 模块化开发的思想变得尤为重要。</p> <p>其实每个 js 文件就算一个模块， 每个模块都有一个独立的作用域， 在这个文件中定义的变量、函数、对象都是私有的， 对其他文件不可见。</p> <p>语法 ： <font color="FireBrick">module.exports 来导出模块  ，  require 函数来导入模块</font></p> <ul><li><p>使用 require 函数导入 Node.js 的<font color="FireBrick">内置模块</font>时无需加./ 和 ../ ， 导入 <font color="FireBrick">自定义的模块</font>时，相对路径必须加上相应的./  和 ../</p></li> <li><p>如果导入的路径是个文件夹， 则会首先检测该文件夹下 package.json 文件中 main 属性对应的路径文件， 如果 main 属性对应路径文件存在则导入， 如果文件不存在会报错。</p></li> <li><p>如果导入的路径是个文件夹， 且导入的文件夹下的 package.json 文件不存在或者 package.json 文件中 main 属性不存在， 则会尝试导入文件夹下的 index.js 和 index.json， 如果还是没找到， 就会报错</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//myCustomModule.js</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">label</span><span class="token operator">:</span><span class="token string">&quot;商用&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">label</span><span class="token operator">:</span><span class="token string">&quot;非商用&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//导出</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span>  <span class="token punctuation">{</span>
    list<span class="token punctuation">,</span> <span class="token comment">//ES6</span>
    sayHello
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//index.js</span>
<span class="token comment">//导入自定义模块</span>
<span class="token keyword">const</span> customFun <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./myCustomModule.js&quot;</span><span class="token punctuation">)</span> 
customFun<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// hello world</span>
</code></pre></div><br> <h2 id="六、npm包管理工具"><a href="#六、npm包管理工具" class="header-anchor">#</a> 六、npm包管理工具</h2> <p><b><font color="FireBrick">npm</font></b> 全称 Node Package Manager ， 翻译为中文意思是『Node 的包管理工具』， 是 Node.js 官方内置的包管理工具。Node.js 在安装时会自动安装 npm ， 即下载安装了 Node.js 就已经可以使用 npm 了。<br>
这里介绍一个能解决 Node.js 在使用 http 模块开发时， 每次更改代码都要重启服务的 npm 包 ：  <b><font color="FireBrick">nodemon</font></b> ， 安装这个包之后， 使用 npmmon 执行程序文件( 如 server.js  )， 之后修改代码后保存会自动重启服务， 不用再去终端手动执行 node server.js 了  ( windows 执行 npmmon server.js 可能会报错， 使用管理员身份打开 PowerShell， 输入 set-ExecutionPolicy remoteSigned 回车 ， 选择 &quot;A全是&quot; 即可)<br> <a href="https://www.npmjs.com/" target="_blank">npm 官网链接 ： https://www.npmjs.com/</a><br> <b>npm一些常用命令：</b><br> <b>安装</b></p> <ul><li><font color="FireBrick">npm -v</font>     查看 npm 的版本</li> <li><font color="FireBrick">npm init</font>      初始化 package.json 文件， npm init -y 会跳过提问， 直接初始化 package.json 文件</li> <li><font color="FireBrick"> npm install / npm i</font>   根据package.json 安装项目所需的依赖包</li> <li><font color="FireBrick">npm install packageName </font>       安装某个模块 (模块记录在 package.json 的 dependencies 中)</li> <li><font color="FireBrick"> npm install packageName --save /  npm install packageName -S </font>   安装某个模块 (模块记录在 package.json 的 dependencies 中)</li> <li><font color="FireBrick"> npm install webpack --save-dev / npm install webpack -D</font>  安装某个模块 (模块记录在 package.json 的 devDependencies 中， 开发环境依赖包)</li> <li><font color="FireBrick"> npm install packageName -g </font>   全局安装模块</li> <li><font color="FireBrick">  npm install packageName@3.10.0 </font>   使用@符号安装指定版本</li></ul> <p><b>卸载</b></p> <ul><li><font color="FireBrick">  npm uninstall packageName </font>  卸载模块</li> <li><font color="FireBrick"> npm uninstall packageName -g</font>  卸载全局模块</li></ul> <p><b>更新</b></p> <ul><li><font color="FireBrick">  npm update packageName --save-dev</font>  更新某个指定的模块</li> <li><font color="FireBrick"> npm update packageName -g</font>  更新某个指定的全局模块</li></ul> <p><b>设置 npm 淘宝镜像</b></p> <ul><li><font color="FireBrick">  npm install -g cnpm --registry=https://registry.npmmirror.com</font></li></ul> <p>接下来尝试在项目中使用一个 npm 包...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//项目根目录初始化 package.json 文件</span>
npm init <span class="token operator">-</span>y
<span class="token comment">//安装 一个去重的包 uniq</span>
npm install uniq  <span class="token comment">// 会生成node_modules 文件夹，并将uniq包加入其中；还会生成packages-lock.json锁定uniq包的版本; 包名会添加到 package.json 文件的 dependencies 中</span>
<span class="token comment">//引入 node_modules中的 uniq</span>
<span class="token keyword">const</span> uniq <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;uniq&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//使用</span>
<span class="token keyword">const</span> uniqList <span class="token operator">=</span> <span class="token function">uniq</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uniqList<span class="token punctuation">)</span> <span class="token comment">// [1,2,3,4,5]</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-f541bbc4 data-v-59db31b3></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-03eee03a data-v-03eee03a><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-03eee03a><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-03eee03a></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-03eee03a></path></svg></div><div class="Sakura" data-v-eb04b150><canvas id="canvas_sakura" style="z-index:1;" data-v-eb04b150></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/merryHe-blogs/assets/js/app.7229edb3.js" defer></script><script src="/merryHe-blogs/assets/js/7.72007088.js" defer></script><script src="/merryHe-blogs/assets/js/2.f4e51e75.js" defer></script><script src="/merryHe-blogs/assets/js/1.5bfc9c43.js" defer></script><script src="/merryHe-blogs/assets/js/43.59acd8e3.js" defer></script>
  </body>
</html>
